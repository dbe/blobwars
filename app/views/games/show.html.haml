= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'
= javascript_include_tag 'blobWars.js'
#left
#right
#content
  #player
    %h1#player-header Player:
    %h3#player-name Player Name
  #viewer
  #control-panel
    = label_tag('playback-speed', 'Playback Speed:');
    = text_field_tag('playback-speed')

:javascript
  $(document).ready(function() {
    gameHistory = #{@game.jsonify}
    viewer = BlobWars.initialize(gameHistory, 'viewer');
    $('canvas').click(function() {
      viewer.playFromBeginning();
    });      
  });
  
 
  // gameHistory = {
  //           dimensions : {x : 20, y: 20},
  //           turns : [
  //             {
  //               playerID : 0,
  //               deltas : [
  //                 {x : 0, y: 0, objectID : 2},
  //                 {x : 0, y: 1, objectID : 2},
  //                 {x : 0, y: 2, objectID : 2},
  //                 {x : 10, y: 10, objectID : 2}
  //               ]
  //             },
  //             {
  //               playerID : 1,
  //               deltas : [
  //                 {x : 1, y: 0, objectID : 3},
  //                 {x : 1, y: 0, objectID : 3},
  //                 {x : 1, y: 1, objectID : 3},
  //                 {x : 10, y: 10, objectID : 3}
  //               ]
  //             },
  //             {
  //               playerID : 0,
  //               deltas : [
  //                 {x : 2, y: 0, objectID : 2},
  //                 {x : 2, y: 1, objectID : 2}
  //               ]
  //             },
  //             {
  //               playerID : 1,
  //               deltas : [
  //                 {x : 4, y: 4, objectID : 3},
  //                 {x : 5, y: 5, objectID : 3}
  //               ]
  //             }
  //           ],
  //           winner : [0]
  //         };

%style  
  :sass
    #left
      background: -moz-linear-gradient( center top, #A92C10, #BD3112)
      width: 500px
      height: 100%
      position: fixed
      top: 0px
      left: 0px
      z-index: 1
    #right
      background-color: #B6A682
      width: 100%
      height: 100%
      position: fixed
      top: 0px
      left: 500px
      z-index: 1
    #content
      text-align: center
      font-family: Arial, sans-serif
      z-index: 100
      position: relative
    canvas
      border: 1px solid
      background-color: #ddd
    #control-panel
      background: -moz-linear-gradient( center top, #9FC8DB, #5D747F)
      background-color: #ccc
      border: 1px solid
      width: 100%
    h1
      font-size: 40px
    label
      font-weight: bold
