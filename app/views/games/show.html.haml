= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'
= javascript_include_tag 'blobWars.js'
#left
#right
#content
  %h1 BlobWars!
  #viewer
  #control-panel
    = label_tag('turn-delay', 'Delay between turns:');
    = text_field_tag('turn-delay')
    = label_tag('delta-delay', 'Delay between deltas:');
    = text_field_tag('delta-delay')

:javascript
  $(document).ready(function() {
    gameHistory = #{@game.jsonify}
    viewer = BlobWars.initialize(gameHistory, 'viewer');
    $('canvas').click(function() {
      viewer.playFromBeginning();
    });
  });
  
 
  // gameHistory = {
  //     dimensions : {x : 20, y: 20},
  //     turns : [
  //       {
  //         playerID : 0,
  //         deltas : [
  //           {x : 0, y: 0, objectID : 0},
  //           {x : 0, y: 1, objectID : 0},
  //           {x : 0, y: 2, objectID : 0}
  //         ]
  //       },
  //       {
  //         playerID : 1,
  //         deltas : [
  //           {x : 1, y: 0, objectID : 1},
  //           {x : 1, y: 1, objectID : 1}
  //         ]
  //       },
  //       {
  //         playerID : 0,
  //         deltas : [
  //           {x : 2, y: 0, objectID : 0},
  //           {x : 2, y: 1, objectID : 0}
  //         ]
  //       },
  //       {
  //         playerID : 1,
  //         deltas : [
  //           {x : 4, y: 4, objectID : 1},
  //           {x : 5, y: 5, objectID : 1}
  //         ]
  //       }
  //     ],
  //     winner : 0
  //   };

%style  
  :sass
    #left
      background: -moz-linear-gradient( center top, #A92C10, #BD3112)
      width: 500px
      height: 100%
      position: fixed
      top: 0px
      left: 0px
      z-index: 1
    #right
      background-color: #B6A682
      width: 100%
      height: 100%
      position: fixed
      top: 0px
      left: 500px
      z-index: 1
    #content
      text-align: center
      font-family: Arial, sans-serif
      z-index: 100
      position: relative
    canvas
      border: 1px solid
      background-color: #ddd
    #control-panel
      background: -webkit-gradient( linear, top, bottom, color-stop(0.05, #ADD950), color-stop(1, #72B329) )
      background: -moz-linear-gradient( center top, #ADD950, #72B329)
      background-color: #ccc
      border: 1px solid
    h1
      font-size: 40px
    label
      font-weight: bold
